<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.masinsa.mapper.MaskMapper">
  
  <select id="getAllImages" resultMap="getAllImagesOb">
    SELECT * FROM image WHERE mask_id = #{maskId};
  </select>

  <resultMap id="getAllImagesOb" type="Image">
  	<id column="image_id" property="id" />
  	<result column="image_url" property="imageUrl" />
  	<result column="image_type" property="imageType" />
  	<collection property="mask" ofType="Mask">
  		<id column="mask_id" property="id" />
  	</collection>
 </resultMap>
 
 
  <select id="getAllMask" resultMap="getAllMaskInfo">
    SELECT * FROM mask WHERE blocking_index = #{kf} OR size = #{size} OR shape = #{shape};
  </select>

  <select id="getSortedMasks" resultMap="getAllMaskInfo">
    SELECT * FROM mask ORDER BY #{standard} ASC;
  </select>
<!-- 
	<select id="getSortedMasksLimit" resultMap="getAllMaskInfo">
		SELECT * FROM mask ORDER BY ${col} ${order} LIMIT ${limit} OFFSET ${offset};
	</select> -->
  
  <resultMap id="getAllMaskInfo" type="Mask">
  	<id column="mask_id" property="id" />
  	<result column="mask_name" property="name" />
  	<result column="size" property="size" />
  	<result column="price" property="price" />
  	<result column="blocking_index" property="kf" />
  	<result column="shape" property="shape" />
  	<result column="thumbnail_image_url" property="thumbnail" />
  	<result column="purchase_url" property="purchaseUrl" />
  	<result column="click_num" property="click" />
  	<result column="soldout_status" property="soldout" />
  	<result column="avg_score" property="avgScore" />
  </resultMap>
  	
</mapper>